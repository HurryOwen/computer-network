# 报文结构
HTTP 协议的请求报文和响应报文的结构基本相同：
- 起始行（start line）：描述请求或响应的基本信息
- 头部字段集合（header）：使用 key-value 形式更详细地说明报文
- 消息正文（entity）:实际传输的数据，不一定是纯文本，可以是图片、视频等二进制数据。

起始行和头部字段集合经常成为“**请求头**”或“**响应头**”，消息正文又称为“**实体***”，但与“**header**”对应，很多时候直接称为“**body**”。

协议规定报文必须有 header，但可以没有 body，而且 header之后必须有一个“空行”，也就是“CRLF”，十六进制的“0D0A”。
![报文结构](https://static001.geekbang.org/resource/image/62/3c/62e061618977565c22c2cf09930e1d3c.png)

# 请求行

请求行也就是请求报文里的起始行，它描述了**客户端想要如何操作服务器端的资源。**
- 请求方法：是一个动词，比如GET/POST，表示对资源的操作；
- 请求目标：通常是一个URI，标记了请求方法要操作的资源；
- 版本号：表示报文使用的 HTTP 协议版本

 ![请求行结构](https://static001.geekbang.org/resource/image/36/b9/36108959084392065f36dff3e12967b9.png)
```
GET / HTTP/1.1
```
# 状态行
响应报文里的起始行，服务器的访问状态。
- 版本号：表示报文使用的 HTTP 协议版本
- 状态码：一个三位数，用代码的形式表示处理的结果，比如200或500
- 原因：作为数字状态码补充，是更详细的解释文字，帮助人理解原因

![状态行](https://static001.geekbang.org/resource/image/a1/00/a1477b903cd4d5a69686683c0dbc3300.png)

```
HTTP/1.1 200 OK
```

# 头部字段
请求行或状态行再加上头部字段集合就构成了 HTTP 报文里完整的请求头或响应头。
![请求头](https://static001.geekbang.org/resource/image/1f/ea/1fe4c1121c50abcf571cebd677a8bdea.png)
![响应头](https://static001.geekbang.org/resource/image/cb/75/cb0d1d2c56400fe9c9988ee32842b175.png)

## 常用头部字段
- 通用字段：在请求头和响应头里都可以出现
- 请求字段：仅能出现在请求头里，进一步说明请求信息或者额外的附加条件，比如 **Host**（唯一一个HTTP/1.1规范里要求必须出现的字段）, **User-Agent**
- 响应字段：仅能出现在响应头里，补充说明响应报文的信息，比如**Server**
- 实体字段：实际上属于通用字段，专门用于描述 body 的额外信息,比如**Content-Length**

对 HTTP 报文的解析和处理实际上主要就是对头字段的处理，理解了头字段也就理解了 HTTP 报文。

# 总结
1. HTTP 报文结构就像是“大头儿子”，由“起始行 + 头部 + 空行 + 实体”组成，简单地说就是“header+body”；
2. HTTP 报文可以没有 body，但必须要有 header，而且 header 后也必须要有空行，形象地说就是“大头”必须要带着“脖子”；
3. 请求头由“请求行 + 头部字段”构成，响应头由“状态行 + 头部字段”构成；
3. 请求行有三部分：请求方法，请求目标和版本号；
4. 状态行也有三部分：版本号，状态码和原因字符串；
5. 头部字段是 key-value 的形式，用“:”分隔，不区分大小写，顺序任意，除了规定的标准头，也可以任意添加自定义字段，实现功能扩展；
6. HTTP/1.1 里唯一要求必须提供的头字段是 Host，它必须出现在请求头里，标记虚拟主机名。课下作业